#ifndef MAINNXC
#define MAINNXC



#include "main.h"
#include "suiveur.h"
#include "suiveur.nxc"
#include "lib.h"
#include "lib.nxc"


task main()
{
    initialiseCapteurs();
    attendDepart();
    Precedes(arretDurgence, afficheCapteurs, mission);
}
void mission()
{

    avanceJusquANoir(MAX);
    StopAllTasks();
}
void rameneCentre1()
{
    // On part de la zone de repos, orienté vers le sud
    avanceJusquAPasBlanc(MAX);
    suitLaLigneEnAvancant(1000, MAX, false); // par la gauche
    milieuLigne(false);
    suitLaLigneEnAvancantDistance(100, MAX, true); // par la droite ; bug potentiellement à cause du jaune
    stopMoteur();
    descendPince(ANGLE_PINCE);
    suitLaLigneEnAvancant(2000, MAX, true); // obligatoirement par la droite pour chopper les élements
    stopMoteur();
    remontePince(ANGLE_PINCE);
    demiTour(MAX);
    suitLaLigneEnAvancant(3000, MAX, false);
    milieuLigne(false);
    suitLaLigneEnAvancantDistance(620, MAX, true);
    tourneDroite(ANGLE_QUART_DE_TOUR);
    avanceJusquANoir(MAX);
    avancePendant(200, MAX);
}
void rameneCentre2()
{
    // On part de la zone de repos, orienté vers le sud
    avanceJusquAPasBlanc(MAX);
    suitLaLigneEnAvancant(1000, MAX, true); // par la droite
    milieuLigne(true);
    suitLaLigneEnAvancantDistance(150, MAX, false); // par la gauche ; bug potentiellement à cause du jaune
    milieuLigne(false);
    suitLaLigneEnAvancantDistance(100, MAX, true);
    stopMoteur();
    descendPince(ANGLE_PINCE);
    suitLaLigneEnAvancant(2000, MAX, true); // obligatoirement par la droite pour chopper les élements
    stopMoteur();
    remontePince(ANGLE_PINCE);
    demiTour(MAX);
    suitLaLigneEnAvancant(3000, MAX, true);
    milieuLigne(false);
    suitLaLigneEnAvancantDistance(620, MAX, false);
    tourneGauche(ANGLE_QUART_DE_TOUR);
    avanceJusquANoir(MAX);
    avancePendant(200, MAX);
}
void stockePetit()
{
    // On part de la zone de repos, orienté vers le nord
    tourneDroite(ANGLE_QUART_DE_TOUR);
    avanceJusquABlanc(MAX);
    avanceJusquAPasBlanc(MAX);
    stopMoteur();
    descendPince(ANGLE_PINCE);
    reculeJusquABlanc(MAX);
    reculeJusquANoir(MAX);
    remontePince(ANGLE_PINCE);
    tourneDroite(ANGLE_QUART_DE_TOUR);
}
void stockeGrand()
{
    // On part de la zone de repos, orienté vers le nord
    tourneGauche(ANGLE_QUART_DE_TOUR);
    avanceJusquABlanc(MAX);
    avanceJusquAPasBlanc(MAX);
    stopMoteur();
    descendPince(ANGLE_PINCE);
    reculeJusquABlanc(MAX);
    reculeJusquANoir(MAX);
    stopMoteur();
    remontePince(ANGLE_PINCE);
    tourneGauche(ANGLE_QUART_DE_TOUR);
}




#endif
